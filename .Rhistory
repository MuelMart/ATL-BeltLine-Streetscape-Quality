?st_read
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidycensus)
library(sf)
library(tmap)
ap_raw <- read_csv('./data/beltline dots.csv')
View(ap_raw)
View(ap_raw)
?st_as_sfc
?st_coordinates
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sfc()
?st_as_sf
?st_as_sfc
?coords_sf
?st_as_sf
View(ap_raw)
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sf(coords = c('latitude', 'longitude'))
View(ap_raw)
library(tidyverse)
library(tidycensus)
library(sf)
library(tmap)
#All geographic analysis will use the NAD83 / Georgia West Projected Coordinate System
epsg_id <- 26967
#Read in raw dataframe of coordinate points
ap_raw <- read_csv('./data/beltline dots.csv')
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sf(coords = c('latitude', 'longitude'))
View(ap)
st_crs(ap)
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sf(coords = c('latitude', 'longitude'), crs = epsg_id)
View(ap)
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sf(coords = c('latitude', 'longitude')) %>%
st_transform(epsg_id)
#All geographic analysis will use the NAD83 / Georgia West Projected Coordinate System
epsg_id <- 26967
#Read in raw dataframe of coordinate points
ap_raw <- read_csv('./data/beltline dots.csv')
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sf(coords = c('latitude', 'longitude'), crs = 4326) %>%
st_transform(epsg_id)
View(ap)
#Read in Atlanta BeltLine Shapefile
beltline <- st_read('./data/BeltLine_Trails.shp')
View(beltline)
tm_shape(beltline) +
tm_lines()
tm_shape(beltline) +
tm_lines()
#Plot accesspoints relative to BeltLine
tmap_mode('view')
tm_shape(beltline) +
tm_lines()
View(beltline)
tmap_mode('plot')
tm_shape(beltline) +
tm_lines()
?tm_basemap
?tm_options
?tmap_options
#Set tmap options
tmap_options(basemaps = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png")
tm_shape(beltline) +
tm_lines()
tmap_mode('view')
tm_shape(beltline) +
tm_lines()
tm_shape(beltline) +
tm_lines(lwd = 1)
?tm_lines
tm_shape(beltline) +
tm_lines(lwd = 1, col = '#00820d', lty = 'dashed')
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed')
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots()
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
?tmap_options
#All geographic analysis will use the NAD83 / Georgia West Projected Coordinate System
epsg_id <- 26967
#Read in raw dataframe of coordinate points
ap_raw <- read_csv('./data/beltline dots.csv')
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sf(coords = c('latitude', 'longitude'), crs = 4326) %>%
st_transform(epsg_id)
#Read in Atlanta BeltLine Shapefile
beltline <- st_read('./data/BeltLine_Trails.shp') %>%
st_transform(epsg_id)
#Plot accesspoints relative to BeltLine
tmap_mode('view')
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75, col = 'red')
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75, col = 'blue')
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
library(reticulate)
library(units)
library(units)
tm_shape(beltline %>% st_buffer(dist = set_units(200, 'meters'))) +
tm_borders(col = 'blue') +
#tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
tm_shape(beltline %>% st_buffer(dist = set_units(1, 'mile'))) +
tm_borders(col = 'blue') +
#tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
tm_shape(beltline) +
tm_borders(col = 'blue') +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
#Set bounding box of the search area
bl_bbox <- st_bbox(beltline %>% st_buffer(dist = set_units(1, 'mile')))
library(osmdata)
library(sfnetworks)
?opq
#Read in OSM street data for streets within the bounding box
osm_raw <- opq(bbox = bl_bbox) %>%
add_osm_features(features = key = 'highway', value = c('motorway', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified','residential')) %>%
#Set bounding box of the search area
bl_bbox <- st_bbox(beltline %>% st_buffer(dist = set_units(1, 'mile')))
#Read in OSM street data for streets within the bounding box
osm_raw <- opq(bbox = bl_bbox) %>%
add_osm_features(key = 'highway', value = c('motorway', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified','residential')) %>%
osmdata_sf() %>%
osm_poly2line()
#Set bounding box of the search area
bl_bbox <- st_bbox(beltline %>% st_buffer(dist = set_units(1, 'mile')))
#Read in OSM street data for streets within the bounding box
osm_raw <- opq(bbox = bl_bbox) %>%
add_osm_feature(key = 'highway', value = c('motorway', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified','residential')) %>%
osmdata_sf() %>%
osm_poly2line()
osm_raw <- opq(bbox = bl_bbox)
osm_raw <- opq(bbox = bl_bbox) %>%
add_osm_feature(key = 'highway', value = c('motorway', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified','residential'))
osm_raw <- opq(bbox = bl_bbox) %>%
add_osm_feature(key = 'highway', value = c('motorway', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified','residential')) %>%
osmdata_sf()
View(osm_raw)
osm_raw[["prefix"]]
?opq
Sys.getenv(osm_api)
Sys.getenv('osm_api')
?add_osm_feature
osm_raw <- opq(bbox = bl_bbox) %>%
add_osm_feature(key = 'highway', value = c('motorway', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified','residential'))
bl_bbox <- st_bbox(beltline %>% st_buffer(dist = set_units(1, 'mile'))) %>%
st_transform(crs = 4326)
#Set bounding box of the search area
bl_bbox <- st_bbox(beltline %>% st_buffer(dist = set_units(1, 'mile')) %>% st_transform(crs = 4326))
#Read in OSM street data for streets within the bounding box
osm_raw <- opq(bbox = bl_bbox) %>%
add_osm_feature(key = 'highway', value = c('motorway', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified','residential')) %>%
osmdata_sf() %>%
osm_poly2line()
View(osm_raw)
osm_streets <- osm_raw$osm_lines %>%
st_transform(epsg_id)
View(osm_streets)
#Plot road networks
tmap_mode('plot')
tm_shape(osm_raw) +
tm_lines()
tmap_mode('plot')
tm_shape(osm_streets) +
tm_lines()
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed')
tm_shape(osm_streets) +
tm_lines(alpha = 0.75) +
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed')
tm_shape(osm_streets) +
tm_lines(alpha = 0.75) +
tm_shape(beltline) +
tm_lines(col = '#1ddb30')
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
tmap_mode('plot')
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = '#1ddb30')
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = '#1ddb30', lwd = 2)
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = '#00820d', lwd = 2)
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2)
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(title = 'BeltLine and Surrounding Streets')
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets', main.title.size = 2)
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets', main.title.size = .5)
#Set tmap options
tmap_options(basemaps = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
main.title.size = 0.75)
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
#Set tmap options
tmap_options(basemaps = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
main.title.size = 1)
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
#Set tmap options
tmap_options(basemaps = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
main.title.size = 1,
main.title.fontface = 'bold')
(main.title = 'BeltLine and Surrounding Streets')
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
#Set tmap options
tmap_options(basemaps = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
main.title.size = 0.8,
main.title.fontface = 'bold')
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
View(osm_streets)
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap %>% st_buffer(set_units(10,'meters'))) +
tm_borders(col = 'blue', lwd = 1.5) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tmap_mode('view')
tm_shape(osm_streets) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap %>% st_buffer(set_units(10,'meters'))) +
tm_borders(col = 'blue', lwd = 1.5) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
street_ap_intersect <- osm_streets %>%
select(c(highway, geometry)) %>%
st_filter(ap %>% st_buffer(set_units(10,'meters')), .predicate = st_intersects)
View(street_ap_intersect)
#Plot road networks
tmap_mode('plot')
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots() +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots(size = 2) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots(size = .75) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots(size = .25) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots(size = .15) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
street_ap_intersect <- osm_streets %>%
select(c(highway, geometry)) %>%
st_filter(ap %>% st_buffer(set_units(20,'meters')), .predicate = st_intersects)
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots(size = .15) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
street_ap_intersect <- osm_streets %>%
select(c(highway, geometry)) %>%
st_filter(ap %>% st_buffer(set_units(30,'meters')), .predicate = st_intersects)
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots(size = .15) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
tm_shape(street_ap_intersect) +
tm_lines() +
tm_shape(beltline) +
tm_lines(col = 'red', lwd = 2) +
tm_shape(ap) +
tm_dots(size = .05) +
tm_layout(main.title = 'BeltLine and Surrounding Streets')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidycensus)
library(sf)
library(tmap)
library(reticulate)
library(units)
library(osmdata)
library(sfnetworks)
#Set tmap options
tmap_options(basemaps = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
main.title.size = 0.8,
main.title.fontface = 'bold')
#All geographic analysis will use the NAD83 / Georgia West Projected Coordinate System
epsg_id <- 26967
#Read in raw dataframe of coordinate points
ap_raw <- read_csv('./data/beltline dots.csv')
#Convert the spreadsheet to an SF object
ap  <- ap_raw %>%
st_as_sf(coords = c('latitude', 'longitude'), crs = 4326) %>%
st_transform(epsg_id)
#Read in Atlanta BeltLine Shapefile
beltline <- st_read('./data/BeltLine_Trails.shp') %>%
st_transform(epsg_id)
#Plot accesspoints relative to BeltLine
tmap_mode('view')
tm_shape(beltline) +
tm_lines(lwd = 2, col = '#00820d', lty = 'dashed') +
tm_shape(ap) +
tm_dots(alpha = 0.75)
